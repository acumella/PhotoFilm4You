<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html">

<ui:composition template="./headerView.xhtml">
	<ui:define name="content">
	
	<div class="card">
  <div class="card-header">
    <h5 class="card-title">List of products</h5>
  </div>
  <div class="card-body">
	  <h:form align="left">	
		<h:dataTable value="#{listallproducts.productsListView}" var="item" bgcolor="#F1F1F1" border="10" first="0" width="100%" frame="hsides" rules="all"  >
 			<h:column>
   				<f:facet name="header">
   					<h:outputText value="id" />
   				</f:facet> 
   				<p align="left"><h:outputText value="#{item.id}" /></p>
 			</h:column>
 			<h:column>
   				<f:facet name="header">
   					<h:outputText value="name" />
   				</f:facet> 
   				<p align="left"><h:outputText value="#{item.name}" /></p>
 			</h:column>
	 		<h:column>
   				<f:facet name="header">
   					<h:outputText value="description" />
   				</f:facet> 
   				<p align="left"><h:outputText value="#{item.description}" /></p>
 			</h:column>
 			<h:column>
   				<f:facet name="header">
   					<h:outputText value="category" />
   				</f:facet> 
   				<p align="left"><h:outputText value="#{item.category.name}" /></p>
 			</h:column>	
 			<h:column>
   				<f:facet name="header">
   					<h:outputText value="brand" />
   				</f:facet> 
   				<p align="left"><h:outputText value="#{item.brand.name}" /></p>
 			</h:column>		
 			<h:column>
   				<f:facet name="header">
   					<h:outputText value="model" />
   				</f:facet> 
   				<p align="left"><h:outputText value="#{item.model.name}" /></p>
 			</h:column>	
 			<h:column>
   				<f:facet name="header">
   					<h:outputText value="daily price" />
   				</f:facet> 
   				<p align="left"><h:outputText value="#{item.dailyPrice}" /></p>
 			</h:column>	
 			<h:column>
   				<f:facet name="header">
   					<h:outputText value="available items" />
   				</f:facet> 
   				<p align="left"><h:outputText value="#{item.availableItems}" /></p>
 			</h:column>	
 		    <h:column>
   				<f:facet name="header">
   					<h:outputText value="product ratting" />
   				</f:facet> 
   				<p align="left"><h:outputText value="#{item.productRatting}">
   									<f:convertNumber pattern="#0.00" />
   								</h:outputText>
   				</p>
 			</h:column>	
		 	<h:column rendered="${login.user.role == 'ROLE_ADMIN'}">	
		 		<f:facet name="header">
		   			<h:outputText value="Update" />
		   		</f:facet> 		
				<h:link outcome="updateProductView" value="Update Product" >
					<f:param name="id" value="#{item.id}" />
					<f:param name="name" value="#{item.name}" />
					<f:param name="description" value="#{item.description}" />
					<f:param name="dailyPrice" value="#{item.dailyPrice}" />
					<f:param name="availableItems" value="#{item.availableItems}" />						
				</h:link>		
		 	</h:column>
		 	<h:column rendered="${login.user.role == 'ROLE_ADMIN'}">	
		 		<f:facet name="header">
		   			<h:outputText value="Delete" />
		   		</f:facet> 		
				<h:link outcome="deleteProductView" value="Delete Product" >
					<f:param name="productId" value="#{item.id}" />						
				</h:link>		
		 	</h:column>	
		 	<h:column>	
		 		<f:facet name="header">
		   			<h:outputText value="Information" />
		   		</f:facet> 		
				<h:link outcome="infoProductView" value="Info Product" >
					<f:param name="id" value="#{item.id}" />						
				</h:link>		
		 	</h:column>	
		 	<h:column rendered="${login.user.role == 'ROLE_ADMIN' || login.user.role == 'ROLE_CUSTOMER'}">	
		 		<f:facet name="header">
		   			<h:outputText value="Rate Product" />
		   		</f:facet> 		
				<h:link outcome="rateProductView" value="Rate Product" >
					<f:param name="productId" value="#{item.id}" />						
				</h:link>		
		 	</h:column>	
		 	<h:column>	
		 		<f:facet name="header">
		   			<h:outputText value="List Comments" />
		   		</f:facet> 		
				<h:link outcome="listAllProductCommentsView" value="List All Product Comments" >
					<f:param name="productId" value="#{item.id}" />						
				</h:link>		
		 	</h:column>	
 		</h:dataTable>
 	  </h:form>	
 	  <br></br>
	  <h:form align="left" >	
		<h:commandLink action="#{listallcategories.previousScreen}" value="Previous" />
		<h:outputText value="   " />
		<h:commandLink action="#{listallcategories.nextScreen}" value="Next" />		
	  </h:form>
  </div>
</div>
	
	</ui:define>
  </ui:composition>
</html>